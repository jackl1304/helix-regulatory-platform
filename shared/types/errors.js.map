{"version":3,"file":"errors.js","sourceRoot":"","sources":["errors.ts"],"names":[],"mappings":"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","sourcesContent":["// Structured Error Classes for Type Safety and Better Error Handling\n\nexport class AppError extends Error {\n  public readonly name: string;\n  public readonly statusCode: number;\n  public readonly isOperational: boolean;\n  public readonly timestamp: string;\n\n  constructor(\n    message: string,\n    statusCode: number = 500,\n    isOperational: boolean = true,\n    stack?: string\n  ) {\n    super(message);\n    \n    this.name = this.constructor.name;\n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    this.timestamp = new Date().toISOString();\n\n    if (stack) {\n      this.stack = stack;\n    } else {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n\nexport class ValidationError extends AppError {\n  public readonly name = 'ValidationError';\n  \n  constructor(\n    message: string,\n    public field: string,\n    public value: unknown,\n    public expectedType: string\n  ) {\n    super(`Validation failed for field '${field}': ${message}`, 400);\n  }\n}\n\nexport class DatabaseError extends AppError {\n  public readonly name = 'DatabaseError';\n  \n  constructor(\n    message: string,\n    public operation: string,\n    public table?: string,\n    public originalError?: Error\n  ) {\n    super(`Database operation '${operation}' failed: ${message}`, 500);\n  }\n}\n\nexport class ApiError extends AppError {\n  public readonly name = 'ApiError';\n  \n  constructor(\n    message: string,\n    statusCode: number,\n    public code: string,\n    public details?: Record<string, unknown>\n  ) {\n    super(message, statusCode);\n  }\n}\n\nexport class NotFoundError extends AppError {\n  public readonly name = 'NotFoundError';\n  \n  constructor(resource: string, identifier?: string) {\n    const message = identifier \n      ? `${resource} with identifier '${identifier}' not found`\n      : `${resource} not found`;\n    super(message, 404);\n  }\n}\n\nexport class AuthenticationError extends AppError {\n  public readonly name = 'AuthenticationError';\n  \n  constructor(message: string = 'Authentication required') {\n    super(message, 401);\n  }\n}\n\nexport class AuthorizationError extends AppError {\n  public readonly name = 'AuthorizationError';\n  \n  constructor(message: string = 'Insufficient permissions') {\n    super(message, 403);\n  }\n}\n\nexport class RateLimitError extends AppError {\n  public readonly name = 'RateLimitError';\n  \n  constructor(\n    public resetTime: Date,\n    public limit: number,\n    public windowMs: number\n  ) {\n    super(`Rate limit exceeded. Limit: ${limit} requests per ${windowMs}ms`, 429);\n  }\n}\n\nexport class ExternalServiceError extends AppError {\n  public readonly name = 'ExternalServiceError';\n  \n  constructor(\n    public serviceName: string,\n    message: string,\n    public originalError?: Error\n  ) {\n    super(`External service '${serviceName}' error: ${message}`, 502);\n  }\n}\n\nexport class ConfigurationError extends AppError {\n  public readonly name = 'ConfigurationError';\n  \n  constructor(\n    public configKey: string,\n    message: string\n  ) {\n    super(`Configuration error for '${configKey}': ${message}`, 500, false);\n  }\n}\n\n// Type guards for error handling\nexport const isAppError = (error: unknown): error is AppError => {\n  return error instanceof AppError;\n};\n\nexport const isOperationalError = (error: unknown): boolean => {\n  return isAppError(error) && error.isOperational;\n};\n\n// Error handler utility\nexport const getErrorMessage = (error: unknown): string => {\n  if (error instanceof Error) {\n    return error.message;\n  }\n  return typeof error === 'string' ? error : 'Unknown error occurred';\n};\n\nexport const getErrorStatusCode = (error: unknown): number => {\n  if (isAppError(error)) {\n    return error.statusCode;\n  }\n  return 500;\n};\n\n// Error response formatter\nexport interface ErrorResponse {\n  error: string;\n  message: string;\n  statusCode: number;\n  timestamp: string;\n  details?: Record<string, unknown>;\n}\n\nexport const formatErrorResponse = (error: unknown): ErrorResponse => {\n  const message = getErrorMessage(error);\n  const statusCode = getErrorStatusCode(error);\n  \n  const response: ErrorResponse = {\n    error: isAppError(error) ? error.name : 'InternalServerError',\n    message,\n    statusCode,\n    timestamp: new Date().toISOString()\n  };\n\n  if (isAppError(error) && 'details' in error) {\n    response.details = (error as ApiError).details;\n  }\n\n  return response;\n};"]}